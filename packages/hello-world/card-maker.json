{
  "title": "Card Maker",
  "description": "Creates a board game card of a mystical creature that you draw",
  "$schema": "https://raw.githubusercontent.com/breadboard-ai/breadboard/@google-labs/breadboard-schema@1.1.0/packages/schema/breadboard.schema.json",
  "version": "0.0.1",
  "edges": [
    {
      "from": "developCharacter",
      "to": "output-2",
      "out": "text",
      "in": "card"
    },
    {
      "from": "describePicture",
      "to": "characterDeveloperTemplate",
      "out": "result",
      "in": "description"
    },
    {
      "from": "describePicture",
      "to": "output-2",
      "out": "result",
      "in": "description"
    },
    {
      "from": "characterDeveloperTemplate",
      "to": "developCharacter",
      "out": "prompt",
      "in": "text"
    },
    {
      "from": "appendPictureToPrompt",
      "to": "describePicture",
      "out": "parts",
      "in": "parts"
    },
    {
      "from": "makeRandomLetter",
      "to": "characterDeveloperTemplate",
      "out": "letter",
      "in": "letter"
    },
    {
      "from": "input-1",
      "to": "appendPictureToPrompt",
      "out": "drawing",
      "in": "part"
    }
  ],
  "nodes": [
    {
      "id": "output-2",
      "type": "output",
      "configuration": {
        "schema": {
          "type": "object",
          "properties": {
            "card": {
              "title": "Game Card",
              "type": "string"
            },
            "description": {
              "title": "Picture description",
              "type": "string"
            }
          },
          "required": [
            "card",
            "description"
          ]
        }
      }
    },
    {
      "id": "developCharacter",
      "type": "invoke",
      "configuration": {
        "path": "https://raw.githubusercontent.com/breadboard-ai/breadboard/3e9735ee557bf18deb87bc46663a6e3af7647e7d/packages/breadboard-web/public/graphs/gemini-generator.json"
      }
    },
    {
      "id": "describePicture",
      "type": "invoke",
      "configuration": {
        "path": "https://raw.githubusercontent.com/breadboard-ai/breadboard/f4adabe69a5a9af73a29fcc72e7042404157717b/packages/breadboard-web/public/graphs/gemini-pro-vision.json"
      }
    },
    {
      "id": "characterDeveloperTemplate",
      "type": "promptTemplate",
      "configuration": {
        "template": "You are an expert board game character developer.\n\n    Read the description below and transform it into a mystical creature with unique abilities.\n\n    Come up with a fun name for the creature and a backstory for how it came to be. The name must start with the letter \"{{letter}}\".\n    \n    Write a story of the creature and how it came to be. Describe its unique abilities. Provide the list of attributes (Strength, Dexterity, Constitution, Intelligence, Wisdom, Charisma) and their scores as a bulleted list.\n\n    Reply in valid Markdown format with the following headings: \"NAME\", \"STORY\", \"ABILITIES\", and \"ATTRIBUTES\".\n    \n    ## DESCRIPTION:\n    {{description}}\n    \n    ## RESPONSE:\n    "
      }
    },
    {
      "id": "appendPictureToPrompt",
      "type": "invoke",
      "configuration": {
        "path": "#appendPictureToPrompt"
      }
    },
    {
      "id": "makeRandomLetter",
      "type": "invoke",
      "configuration": {
        "path": "#makeRandomLetter"
      }
    },
    {
      "id": "input-1",
      "type": "input",
      "configuration": {
        "schema": {
          "type": "object",
          "properties": {
            "drawing": {
              "type": "image/png",
              "title": "Draw an object to transform into the mystical creature",
              "format": "drawable"
            }
          },
          "required": [
            "drawing"
          ]
        }
      }
    }
  ],
  "kits": [],
  "graphs": {
    "appendPictureToPrompt": {
      "edges": [
        {
          "from": "appendPictureToPrompt-input",
          "to": "appendPictureToPrompt-run",
          "out": "*"
        },
        {
          "from": "appendPictureToPrompt-run",
          "to": "appendPictureToPrompt-output",
          "out": "*"
        }
      ],
      "nodes": [
        {
          "id": "appendPictureToPrompt-input",
          "type": "input",
          "configuration": {}
        },
        {
          "id": "appendPictureToPrompt-run",
          "type": "runJavascript",
          "configuration": {
            "prompt": "Describe the pictured object or subject in the sketch above, provide a thorough list of details. No matter how simple the sketch is, try\n     to come up with as many details as possible. Improvise if necessary.",
            "code": "function appendPictureToPrompt({ part, prompt }) {\n  const parts = Array.isArray(part) ? part : [part];\n  return { parts: [...parts, { text: prompt }] };\n}",
            "name": "appendPictureToPrompt",
            "raw": true
          }
        },
        {
          "id": "appendPictureToPrompt-output",
          "type": "output",
          "configuration": {}
        }
      ]
    },
    "makeRandomLetter": {
      "edges": [
        {
          "from": "makeRandomLetter-input",
          "to": "makeRandomLetter-run",
          "out": "*"
        },
        {
          "from": "makeRandomLetter-run",
          "to": "makeRandomLetter-output",
          "out": "*"
        }
      ],
      "nodes": [
        {
          "id": "makeRandomLetter-input",
          "type": "input",
          "configuration": {}
        },
        {
          "id": "makeRandomLetter-run",
          "type": "runJavascript",
          "configuration": {
            "code": "function makeRandomLetter() {\n  const letter = String.fromCharCode(65 + Math.floor(Math.random() * 26));\n  return { letter };\n}",
            "name": "makeRandomLetter",
            "raw": true
          }
        },
        {
          "id": "makeRandomLetter-output",
          "type": "output",
          "configuration": {}
        }
      ]
    }
  }
}