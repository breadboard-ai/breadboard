{
  "title": "Business Review Replier Demo",
  "description": "A board to demonstrate the business review replier.",
  "edges": [
    {
      "from": "fn-25",
      "to": "fn-27",
      "out": "item",
      "in": "b"
    },
    {
      "from": "fn-27",
      "to": "invoke-29",
      "out": "item",
      "in": "review"
    },
    {
      "from": "fn-27",
      "to": "output-28",
      "out": "item",
      "in": "review"
    },
    {
      "from": "input-24",
      "to": "invoke-29",
      "out": "task",
      "in": "task"
    },
    {
      "from": "input-24",
      "to": "invoke-29",
      "out": "tone",
      "in": "tone"
    },
    {
      "from": "input-24",
      "to": "invoke-29",
      "out": "voice",
      "in": "voice"
    },
    {
      "from": "input-24",
      "to": "passthrough-26",
      "out": "",
      "in": ""
    },
    {
      "from": "input-24",
      "to": "passthrough-26",
      "out": "review",
      "in": "a"
    },
    {
      "from": "invoke-29",
      "to": "output-28",
      "out": "reply",
      "in": "reply"
    },
    {
      "from": "passthrough-26",
      "to": "fn-27",
      "out": "*",
      "in": ""
    }
  ],
  "nodes": [
    {
      "id": "input-24",
      "type": "input",
      "configuration": {
        "schema": {
          "type": "object",
          "properties": {
            "review": {
              "type": "string",
              "title": "Review",
              "default": "",
              "format": "multiline"
            },
            "task": {
              "type": "string",
              "title": "Task",
              "description": "Task description and instructions",
              "default": "You are tasked with assisting by generating thoughtful, engaging, and professional responses to customer reviews. Your purpose is to process reviews from various sources and generate replies that maintain the brand's voice. Here are the detailed instructions for generating replies:\n\n1. **Input Analysis:**\n - Extract key points from the customer review, identifying positive feedback, concerns, and suggestions.\n - Recognise the customer's sentiment and tailor your response accordingly.\n\n2. **Structure:**\n - Start with a greeting and address the reviewer by name if available.\n - Thank the customer for their feedback.\n - Address the key points raised in the review.\n - Conclude with an invitation for further engagement or a thank you note.\n\n3. **Brand Voice:**\n - Maintain a consistent brand voice that aligns with the values and identity.\n - Avoid jargon or overly technical language unless typically communicated in such a manner.",
              "format": "multiline"
            },
            "tone": {
              "type": "string",
              "title": "Tone",
              "description": "General tone guidelines",
              "default": "## General Tone Guidelines\n- The tone should be friendly, appreciative, and professional.\n- Avoid mentioning or implying that the response was generated by a system or software. Maintain a natural and human-like tone throughout the replies.",
              "format": "multiline"
            },
            "voice": {
              "type": "string",
              "title": "Voice",
              "description": "Business-specific tone guidelines",
              "default": "## Specific Tone Guidelines:\n### Tone description:\n\nThe aim is for a warm, welcoming, and slightly informal tone. Value personal connections and strive to make every customer feel like a valued guest.\n\n### Positive Review:\n\n- Express gratitude and highlight the specific compliments mentioned.\n- Example:\n - Customer Review: “I had a fantastic experience. The food was delicious, and the service was top-notch!”\n - Reply: “Hi [Customer Name], thank you so much for your kind words! We are thrilled to hear that you enjoyed our food and service. Your feedback means a lot to us, and we look forward to welcoming you back soon!”\n\n### Negative Review:\n\n- Show empathy, apologise for any shortcomings, and offer solutions or steps taken to address the issue.\n- Example:\n - Customer Review: “The waiting time was too long, and my order was incorrect.”\n - Reply: “Hi [Customer Name], we are very sorry to hear about your experience. We strive to provide prompt and accurate service, and it seems we fell short this time. Please reach out to us directly at [contact information] so we can make it right. Thank you for bringing this to our attention.”\n\n### Neutral Review:\n\n- Acknowledge the feedback, thank the customer, and mention any improvements or features that might interest them.\n- Example:\n - Customer Review: “The coffee was good, but the seating area could be improved.”\n - Reply: “Hi [Customer Name], thank you for your feedback. We’re glad you enjoyed the coffee and appreciate your suggestions regarding the seating area. We’re always looking for ways to enhance our customers’ experience and will take your comments into consideration. We hope to see you again soon!”",
              "format": "multiline"
            }
          },
          "required": [
            "review",
            "tone",
            "voice"
          ]
        }
      },
      "metadata": {
        "title": "Input"
      }
    },
    {
      "id": "output-28",
      "type": "output",
      "configuration": {
        "schema": {
          "type": "object",
          "properties": {
            "reply": {
              "type": "string",
              "title": "reply"
            },
            "review": {
              "type": "string",
              "title": "review"
            }
          }
        }
      },
      "metadata": {
        "title": "Output"
      }
    },
    {
      "id": "fn-25",
      "type": "runJavascript",
      "configuration": {
        "array": [
          "Rating: ★★★★★\n\nI recently visited a coffee shop and was thoroughly impressed with my experience. From the moment I walked in, I was greeted with a warm, welcoming atmosphere that instantly made me feel at home. The cosy decor, complete with comfortable seating and tasteful artwork, added to the overall charm of the place.\nThe staff were exceptionally friendly and attentive, making sure that every customer felt valued. I was particularly impressed by their knowledge of the menu and their willingness to offer recommendations. Their passion for coffee was evident, and it was clear that they took great pride in their work.\nNow, onto the coffee – it was nothing short of spectacular. I ordered a flat white, and it was perfectly balanced with a rich, creamy texture and a smooth, velvety finish. The barista’s skill in crafting the drink was apparent, and it was one of the best coffees I’ve had in a long time. They also offer a variety of specialty drinks, teas, and pastries, all of which looked delicious.\nOne aspect that really stood out was their commitment to sustainability. This coffee shop uses ethically sourced beans and environmentally friendly packaging, which is a big plus for me. It’s great to see a local business taking steps to reduce its environmental impact.\nOverall, the coffee shop exceeded my expectations in every way. The delightful ambience, excellent coffee, and outstanding service make it a standout in the local coffee scene. I highly recommend paying them a visit – you won’t be disappointed!",
          "I had an amazing time at the café. The coffee was absolutely perfect and the staff were so friendly and attentive. I’ll definitely be coming back!\"",
          "This boutique has such a fantastic collection! I found exactly what I was looking for and the customer service was excellent. Highly recommend!\"",
          "What a wonderful experience at the spa! The massage was incredibly relaxing and the ambience was just right. Can't wait for my next visit.\"",
          "The service at the restaurant was really slow. We had to wait almost an hour for our food, and when it arrived, it was cold and undercooked.\"",
          "I was very disappointed with my stay at the hotel. The room was not clean, and the staff seemed uninterested in addressing our concerns.\"",
          "The product I bought from the electronics store stopped working after just a week. When I tried to contact customer service, I got no response.\"",
          "The new exhibit at the museum was interesting, but it felt a bit disorganised. Some of the information was hard to follow, but overall, it was a decent visit.\"",
          "I had a mixed experience at the salon. The haircut was fine, but the stylist seemed rushed and didn't really listen to what I wanted.\"",
          "Shopping at the supermarket is convenient, but the aisles are often cluttered and it’s hard to find certain items. Prices are reasonable though.\""
        ],
        "code": "const fn_25 = inputs=>{console.log({inputs});const randomIndex=Math.floor(Math.random()*inputs.array.length);return{item:inputs.array[randomIndex]}};",
        "name": "fn_25",
        "raw": true
      },
      "metadata": {
        "title": "Pick random example"
      }
    },
    {
      "id": "fn-27",
      "type": "runJavascript",
      "configuration": {
        "code": "const fn_27 = inputs=>{if(\"a\"in inputs){return{item:inputs[\"a\"]}}if(\"b\"in inputs){return{item:inputs[\"b\"]}}throw new Error(\"No value\")};",
        "name": "fn_27",
        "raw": true
      },
      "metadata": {
        "title": "Coalesce"
      }
    },
    {
      "id": "invoke-29",
      "type": "invoke",
      "configuration": {
        "$board": {
          "title": "Business Review Reply Generator",
          "description": "A board that generates a reply to a business review.",
          "edges": [
            {
              "from": "input-18",
              "to": "fn-19",
              "out": "tone",
              "in": "a"
            },
            {
              "from": "input-18",
              "to": "fn-19",
              "out": "voice",
              "in": "b"
            },
            {
              "from": "input-18",
              "to": "fn-21",
              "out": "review",
              "in": "text"
            },
            {
              "from": "input-18",
              "to": "specialist-22",
              "out": "task",
              "in": "task"
            },
            {
              "from": "fn-19",
              "to": "fn-20",
              "out": "result",
              "in": "text"
            },
            {
              "from": "fn-21",
              "to": "specialist-22",
              "out": "context",
              "in": "in"
            },
            {
              "from": "specialist-22",
              "to": "output-23",
              "out": "out",
              "in": "reply"
            },
            {
              "from": "fn-20",
              "to": "specialist-22",
              "out": "context",
              "in": "persona"
            }
          ],
          "nodes": [
            {
              "id": "input-18",
              "type": "input",
              "configuration": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "task": {
                      "type": "string",
                      "title": "Task",
                      "format": "multiline",
                      "default": "You are tasked with assisting by generating thoughtful, engaging, and professional responses to customer reviews. Your purpose is to process reviews from various sources and generate replies that maintain the brand's voice. Here are the detailed instructions for generating replies:\n\n1. **Input Analysis:**\n - Extract key points from the customer review, identifying positive feedback, concerns, and suggestions.\n - Recognise the customer's sentiment and tailor your response accordingly.\n\n2. **Structure:**\n - Start with a greeting and address the reviewer by name if available.\n - Thank the customer for their feedback.\n - Address the key points raised in the review.\n - Conclude with an invitation for further engagement or a thank you note.\n\n3. **Brand Voice:**\n - Maintain a consistent brand voice that aligns with the values and identity.\n - Avoid jargon or overly technical language unless typically communicated in such a manner.",
                      "description": "Task description and instructions"
                    },
                    "tone": {
                      "type": "string",
                      "title": "Tone",
                      "description": "General tone guidelines",
                      "default": "## General Tone Guidelines\n- The tone should be friendly, appreciative, and professional.\n- Avoid mentioning or implying that the response was generated by a system or software. Maintain a natural and human-like tone throughout the replies.",
                      "format": "multiline"
                    },
                    "voice": {
                      "type": "string",
                      "title": "Voice",
                      "description": "Business-specific tone guidelines",
                      "default": "## Specific Tone Guidelines:\n### Tone description:\n\nThe aim is for a warm, welcoming, and slightly informal tone. Value personal connections and strive to make every customer feel like a valued guest.\n\n### Positive Review:\n\n- Express gratitude and highlight the specific compliments mentioned.\n- Example:\n - Customer Review: “I had a fantastic experience. The food was delicious, and the service was top-notch!”\n - Reply: “Hi [Customer Name], thank you so much for your kind words! We are thrilled to hear that you enjoyed our food and service. Your feedback means a lot to us, and we look forward to welcoming you back soon!”\n\n### Negative Review:\n\n- Show empathy, apologise for any shortcomings, and offer solutions or steps taken to address the issue.\n- Example:\n - Customer Review: “The waiting time was too long, and my order was incorrect.”\n - Reply: “Hi [Customer Name], we are very sorry to hear about your experience. We strive to provide prompt and accurate service, and it seems we fell short this time. Please reach out to us directly at [contact information] so we can make it right. Thank you for bringing this to our attention.”\n\n### Neutral Review:\n\n- Acknowledge the feedback, thank the customer, and mention any improvements or features that might interest them.\n- Example:\n - Customer Review: “The coffee was good, but the seating area could be improved.”\n - Reply: “Hi [Customer Name], thank you for your feedback. We’re glad you enjoyed the coffee and appreciate your suggestions regarding the seating area. We’re always looking for ways to enhance our customers’ experience and will take your comments into consideration. We hope to see you again soon!”",
                      "format": "multiline"
                    },
                    "review": {
                      "type": "string",
                      "title": "Review",
                      "format": "multiline"
                    }
                  },
                  "required": [
                    "task",
                    "tone",
                    "voice",
                    "review"
                  ]
                }
              },
              "metadata": {
                "title": "Input"
              }
            },
            {
              "id": "fn-19",
              "type": "runJavascript",
              "configuration": {
                "delimiter": "\n\n",
                "code": "const fn_19 = ({a,b,delimiter=\" \"})=>{return{result:a+delimiter+b}};",
                "name": "fn_19",
                "raw": true
              },
              "metadata": {
                "title": "Persona"
              }
            },
            {
              "id": "fn-21",
              "type": "runJavascript",
              "configuration": {
                "role": "user",
                "code": "const fn_21 = inputs=>{const parts=[{text:inputs.text}];return{context:inputs.role?{role:inputs.role,parts}:{parts}}};",
                "name": "fn_21",
                "raw": true
              },
              "metadata": {
                "title": "Make review context"
              }
            },
            {
              "id": "specialist-22",
              "type": "specialist",
              "configuration": {
                "model": "gemini-1.5-flash-latest"
              },
              "metadata": {
                "title": "Chat Bot"
              }
            },
            {
              "id": "fn-20",
              "type": "runJavascript",
              "configuration": {
                "code": "const fn_20 = inputs=>{const parts=[{text:inputs.text}];return{context:inputs.role?{role:inputs.role,parts}:{parts}}};",
                "name": "fn_20",
                "raw": true
              },
              "metadata": {
                "title": "Make persona context"
              }
            },
            {
              "id": "output-23",
              "type": "output",
              "configuration": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "review": {
                      "type": "string",
                      "title": "Review"
                    },
                    "reply": {
                      "type": "string",
                      "title": "Reply"
                    }
                  }
                }
              },
              "metadata": {
                "title": "Output"
              }
            }
          ],
          "graphs": {}
        }
      },
      "metadata": {
        "title": "Invoke reply generator"
      }
    },
    {
      "id": "passthrough-26",
      "type": "passthrough",
      "configuration": {},
      "metadata": {
        "title": "Relabel Review"
      }
    }
  ]
}